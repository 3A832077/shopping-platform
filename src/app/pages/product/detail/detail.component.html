<nz-page-header (nzBack)="onBack()" nzBackIcon></nz-page-header>
<div style="margin-top: 48px;" class="container">
  <div class="row">
    <div class="col-12 col-md-6 mb-3">
      <div class="product-img mb-2" [ngStyle]="{'background-image': 'url(' + product.imageUrl + ')'}"></div>
    </div>
    <div class="col-12 col-md-6 d-flex flex-column justify-content-between">
      <div>
        <h1 class="fw-bold" style="padding-top: 25px;">{{ product.name }}</h1>
        <p class="fw-bold" style="padding-top: 25px;">${{ product.price }}</p>
        <nz-divider/>
        <div >
          <p>商品資訊</p>
          <p>{{ product.info }}</p>
        </div>
        <nz-divider style="margin-top: 110px;"/>
        <div>
          <p>
            @if (product.stock === 0) {
              <span class="sold-out">已售完</span>
            }
            @else {
              數量
              <nz-input-number [(ngModel)]="quantity" [nzMin]="1" [nzStep]="1" nzVariant="underlined" [nzMax]="product.stock"/>
            }
          </p>
        </div>
        <div class="d-flex" style="gap: 20px;">
          @if (product.stock > 0) {
            <button matButton="elevated" class="mt-3" (click)="addToCart(product.id, quantity)">
              加入購物車
            </button>
            <button matButton="elevated" class="mt-3" (click)="addToCart(product.id, quantity, true)">
              直接購買
            </button>
          }
        </div>
      </div>
    </div>
  </div>
  <div class="row mt-5">
    <div class="col-12">
      <div >
        <h4 class="mb-4 fw-bold">其他同類別商品</h4>
        <div class="row">
          @for (item of relatedProducts; track item) {
            <div class="col-6 col-lg-4 col-xl-3 mb-4">
              <div class="p-2 text-center" [routerLink]="['/product', item.id]" style="cursor: pointer;">
                <div class="related-products mb-2" [ngStyle]="{'background-image': 'url(' + item.imageUrl + ')'}"></div>
                <div>{{ item.name }}</div>
              </div>
            </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>
